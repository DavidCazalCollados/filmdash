<div class= "banner d-flex justify-content-center text-center align-items-center">
  <h2>Select your <br />preferences</h2>
</div>


<%= form_with url: preferences_movies_path, class: "form-height", method: :get do |f| %>
    <div class="section marge-t">
      <h5>Format</h5>
      <div class="d-flex scrolling">
        <div class="radio-space" id="movie-image">
          <%= f.radio_button :format, "movie", id: 'movie' %>
          <%= f.label :format, "Movies", for: "movie" %>
        </div>
        <div class="radio-space" id="serie-img">
          <%= f.radio_button :format, "tv_series", id: 'tv_series' %>
          <%= f.label :format, "Series", for: "tv_series" %>
        </div>
      </div>
    </div>

    <div class="section mt-4 marge-t-two">
      <h5>Runtime</h5>
      <div class="d-flex scrolling">
        <div class="radio-space" id="onehour-img">
          <%= f.radio_button :runtime, "90", id: '90' %>
          <%= f.label :runtime, "1h30 Max", for: "90" %>
        </div>
        <div class="radio-space" id="twohour-img">
          <%= f.radio_button :runtime, "120", id: '120' %>
          <%= f.label :runtime, "2h Max", for: "120" %>
        </div>
        <div class="radio-space" id="threehour-img">
          <%= f.radio_button :runtime, "180", id: '180' %>
          <%= f.label :format, "3h max", for: "120" %>
        </div>
        <div class="radio-space" id="fourhour-img">
          <%= f.radio_button :runtime, "240", id: '240' %>
          <%= f.label :format, "3h and more", for: "240" %>
        </div>
      </div>
    </div>

    <div class="section mt-4 marge-t-two">
      <h5>Genre</h5>
      <div class="d-flex scrolling">
        <div class="check" id="action-img">
          <%= f.check_box :genre, { multiple: true }, '28', nil %>
          <%= f.label :genre, "Action", for: "28" %>
        </div>
        <div class="check" id="adventure-img">
          <%= f.check_box :genre, { multiple: true }, "12", nil %>
          <%= f.label :genre, "Adventure", for: "12" %>
        </div>
        <div class="check" id="animation-img">
          <%= f.check_box :genre, { multiple: true }, '16', nil %>
          <%= f.label :genre, "Animation", for: "16" %>
        </div>
        <div class="check" id="comedy-img">
          <%= f.check_box :genre, { multiple: true }, '35', nil %>
          <%= f.label :genre, "Comedy", for: "35" %>
        </div>
        <div class="check" id="crime-img">
          <%= f.check_box :genre, { multiple: true }, '80', nil %>
          <%= f.label :genre, "Crime", for: "80" %>
        </div>
        <div class="check" id="docu-img">
          <%= f.check_box :genre, { multiple: true }, '99', nil %>
          <%= f.label :genre, "Documentary", for: "99" %>
        </div>
        <div class="check" id="drama-img">
          <%= f.check_box :genre, { multiple: true }, '18', nil %>
          <%= f.label :genre, "Drama", for: "18" %>
        </div>
        <div class="check" id="family-img">
          <%= f.check_box :genre, { multiple: true }, '10751', nil %>
          <%= f.label :genre, "Family", for: "10751" %>
        </div>
        <div class="check" id="fantasy-img">
          <%= f.check_box :genre, { multiple: true }, '14', nil %>
          <%= f.label :genre, "Fantasy", for: "14" %>
        </div>
        <div class="check" id="history-img">
          <%= f.check_box :genre, { multiple: true }, '36', nil %>
          <%= f.label :genre, "History", for: "36" %>
        </div>
        <div class="check" id="horror-img">
          <%= f.check_box :genre, { multiple: true }, '27', nil %>
          <%= f.label :genre, "Horror", for: "27" %>
        </div>
        <div class="check" id="music-img">
          <%= f.check_box :genre, { multiple: true }, '10402', nil %>
          <%= f.label :genre, "Music", for: "10402" %>
        </div>
        <div class="check" id="mystery-img">
          <%= f.check_box :genre, { multiple: true }, '9648', nil %>
          <%= f.label :genre, "Mystery", for: "9648" %>
        </div>
        <div class="check" id="romance-img">
          <%= f.check_box :genre, { multiple: true }, '10749', nil %>
          <%= f.label :genre, "Romance", for: "10749" %>
        </div>
        <div class="check" id="science-img">
          <%= f.check_box :genre, { multiple: true }, '878', nil %>
          <%= f.label :genre, "Science Fiction", for: "878" %>
        </div>
        <div class="check" id="thriller-img">
          <%= f.check_box :genre, { multiple: true }, '53', nil %>
          <%= f.label :genre, "Thriller", for: "53" %>
        </div>
        <div class="check" id="war-img">
          <%= f.check_box :genre, { multiple: true }, '10752', nil %>
          <%= f.label :genre, "War", for: "10752" %>
        </div>
        <div class="check" id="western-img">
          <%= f.check_box :genre, { multiple: true }, '37', nil %>
          <%= f.label :genre, "Western", for: "37" %>
        </div>
      </div>
    </div>

    <div class="section mt-4 marge-t-two">
      <h5>Period</h5>
      <div class="d-flex scrolling">
        <div class="radio-space" id="thisyear-img">
          <%= f.radio_button :period, "2024-01-01", id: '2024-01-01' %>
          <%= f.label :period, "This year", for: "2024-01-01" %>
        </div>
        <div class="radio-space" id="twenty-twenty-img">
          <%= f.radio_button :period, "2020-01-01", id: '2020-01-01' %>
          <%= f.label :period, "2020's", for: "2020-01-01" %>
        </div>
        <div class="radio-space" id="twenty-ten-img">
          <%= f.radio_button :period, "2010-01-01", id: '2010-01-01' %>
          <%= f.label :period, "2010's", for: "2010-01-01" %>
        </div>
        <div class="radio-space" id="twenty-img">
          <%= f.radio_button :period, "2000-01-01", id: '2000-01-01' %>
          <%= f.label :period, "2000's", for: "2000-01-01" %>
        </div>
        <div class="radio-space" id="nine-nine-img">
          <%= f.radio_button :period, "1990-01-01", id: '1990-01-01' %>
          <%= f.label :period, "1990's", for: "1990-01-01" %>
        </div>
        <div class="radio-space" id="nine-eight-img">
          <%= f.radio_button :period, "1980-01-01", id: '1980-01-01' %>
          <%= f.label :period, "1980's", for: "1980-01-01" %>
        </div>
        <div class="radio-space" id="nine-seven-img">
          <%= f.radio_button :period, "1970-01-01", id: '1970-01-01' %>
          <%= f.label :period, "1970's", for: "1970-01-01" %>
        </div>
        <div class="radio-space" id="nine-six-img">
          <%= f.radio_button :period, "1960-01-01", id: '1960-01-01' %>
          <%= f.label :period, "1960's", for: "1960-01-01" %>
        </div>
        <div class="radio-space" id="nine-five-img">
          <%= f.radio_button :period, "1950-01-01", id: '1950-01-01' %>
          <%= f.label :period, "1950's", for: "1950-01-01" %>
        </div>
        <div class="radio-space" id="nine-four-img">
          <%= f.radio_button :period, "1940-01-01", id: '1940-01-01' %>
          <%= f.label :period, "1940's", for: "1940-01-01" %>
        </div>
        <div class="radio-space" id="nine-three-img">
          <%= f.radio_button :period, "1930-01-01", id: '1930-01-01' %>
          <%= f.label :period, "1930's", for: "1930-01-01" %>
        </div>
        <div class="radio-space" id="nine-two-img">
          <%= f.radio_button :period, "1920-01-01", id: '1920-01-01' %>
          <%= f.label :period, "1920's", for: "1920-01-01" %>
        </div>
      </div>
    </div>

    <div class="text-center mt-4 form-submit">
      <%= f.submit "See my selection", class: "stylish-button" %>
    </div>
<% end %>
  <%# <div class="container mt-4">
    <h5>Format</h5>
  </div> %>
<script>
  document.addEventListener("turbo:load", function () {
  const images = document.querySelectorAll(".radio-space");
  const imagesGenre = document.querySelectorAll(".check");

  for (let i = 0; i < images.length; i++) {
    images[i].onclick = function(e) {
      e.preventDefault();

      const id = this.firstElementChild;
      id.checked = true;
      const children = this.parentElement.children;

      for (let j = 0; j < children.length; j++) {
        if (id.checked === false) {
          children[j].classList.remove("d-none");
          children[j].classList.add("border");
          children[j].classList.add("border-danger");
          continue;
        }

        if (this === children[j]) {
          children[j].classList.remove("d-none");
          children[j].classList.add("border");
          children[j].classList.add("border-danger");
        } else {
          children[j].classList.toggle("d-none");
          children[j].classList.remove("border");
          children[j].classList.remove("border-danger");
        }
      }
    };
  }
});

</script>
